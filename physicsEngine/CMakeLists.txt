cmake_minimum_required(VERSION 3.7)
project(urchinPhysicsEngine)

set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR})
set(CMAKE_CXX_STANDARD 14)

add_definitions(-ffast-math)

set(SOURCE_FILES
        src/body/work/AbstractWorkBody.cpp
        src/body/work/AbstractWorkBody.h
        src/body/work/WorkGhostBody.cpp
        src/body/work/WorkGhostBody.h
        src/body/work/WorkRigidBody.cpp
        src/body/work/WorkRigidBody.h
        src/body/model/AbstractBody.cpp
        src/body/model/AbstractBody.h
        src/body/BodyManager.cpp
        src/body/BodyManager.h
        src/body/InertiaCalculation.cpp
        src/body/InertiaCalculation.h
        src/body/model/RigidBody.cpp
        src/body/model/RigidBody.h
        src/collision/broadphase/aabbtree/AABBNode.cpp
        src/collision/broadphase/aabbtree/AABBNode.h
        src/collision/broadphase/aabbtree/AABBTree.cpp
        src/collision/broadphase/aabbtree/AABBTree.h
        src/collision/broadphase/aabbtree/AABBTreeAlgorithm.cpp
        src/collision/broadphase/aabbtree/AABBTreeAlgorithm.h
        src/collision/broadphase/aabbtree/BodyNodeData.cpp
        src/collision/broadphase/aabbtree/BodyNodeData.h
        src/collision/broadphase/BroadPhaseAlgorithm.cpp
        src/collision/broadphase/BroadPhaseAlgorithm.h
        src/collision/broadphase/BroadPhaseManager.cpp
        src/collision/broadphase/BroadPhaseManager.h
        src/collision/broadphase/PairContainer.cpp
        src/collision/broadphase/PairContainer.h
        src/collision/broadphase/VectorPairContainer.cpp
        src/collision/broadphase/VectorPairContainer.h
        src/collision/constraintsolver/solvingdata/AccumulatedSolvingData.cpp
        src/collision/constraintsolver/solvingdata/AccumulatedSolvingData.h
        src/collision/constraintsolver/solvingdata/CommonSolvingData.cpp
        src/collision/constraintsolver/solvingdata/CommonSolvingData.h
        src/collision/constraintsolver/solvingdata/ImpulseSolvingData.cpp
        src/collision/constraintsolver/solvingdata/ImpulseSolvingData.h
        src/collision/constraintsolver/ConstraintSolverManager.cpp
        src/collision/constraintsolver/ConstraintSolverManager.h
        src/collision/constraintsolver/ConstraintSolving.cpp
        src/collision/constraintsolver/ConstraintSolving.h
        src/collision/integration/IntegrateTransformManager.cpp
        src/collision/integration/IntegrateTransformManager.h
        src/collision/integration/IntegrateVelocityManager.cpp
        src/collision/integration/IntegrateVelocityManager.h
        src/collision/island/IslandContainer.cpp
        src/collision/island/IslandContainer.h
        src/collision/island/IslandElement.cpp
        src/collision/island/IslandElement.h
        src/collision/island/IslandElementLink.cpp
        src/collision/island/IslandElementLink.h
        src/collision/island/IslandManager.cpp
        src/collision/island/IslandManager.h
        src/collision/narrowphase/algorithm/continuous/result/ContinuousCollisionResult.cpp
        src/collision/narrowphase/algorithm/continuous/result/ContinuousCollisionResult.h
        src/collision/narrowphase/algorithm/continuous/GJKContinuousCollisionAlgorithm.cpp
        src/collision/narrowphase/algorithm/continuous/GJKContinuousCollisionAlgorithm.h
        src/collision/narrowphase/algorithm/epa/EPAAlgorithm.cpp
        src/collision/narrowphase/algorithm/epa/EPAAlgorithm.h
        src/collision/narrowphase/algorithm/epa/result/EPAResult.cpp
        src/collision/narrowphase/algorithm/epa/result/EPAResult.h
        src/collision/narrowphase/algorithm/epa/result/EPAResultCollide.cpp
        src/collision/narrowphase/algorithm/epa/result/EPAResultCollide.h
        src/collision/narrowphase/algorithm/epa/result/EPAResultInvalid.cpp
        src/collision/narrowphase/algorithm/epa/result/EPAResultInvalid.h
        src/collision/narrowphase/algorithm/epa/result/EPAResultNoCollide.cpp
        src/collision/narrowphase/algorithm/epa/result/EPAResultNoCollide.h
        src/collision/narrowphase/algorithm/epa/EPATriangleData.cpp
        src/collision/narrowphase/algorithm/epa/EPATriangleData.h
        src/collision/narrowphase/algorithm/gjk/GJKAlgorithm.cpp
        src/collision/narrowphase/algorithm/gjk/GJKAlgorithm.h
        src/collision/narrowphase/algorithm/gjk/result/GJKResult.cpp
        src/collision/narrowphase/algorithm/gjk/result/GJKResult.h
        src/collision/narrowphase/algorithm/gjk/result/GJKResultCollide.cpp
        src/collision/narrowphase/algorithm/gjk/result/GJKResultCollide.h
        src/collision/narrowphase/algorithm/gjk/result/GJKResultInvalid.cpp
        src/collision/narrowphase/algorithm/gjk/result/GJKResultInvalid.h
        src/collision/narrowphase/algorithm/gjk/result/GJKResultNoCollide.cpp
        src/collision/narrowphase/algorithm/gjk/result/GJKResultNoCollide.h
        src/collision/narrowphase/algorithm/utils/Simplex.cpp
        src/collision/narrowphase/algorithm/utils/Simplex.h
        src/collision/narrowphase/algorithm/CollisionAlgorithm.cpp
        src/collision/narrowphase/algorithm/CollisionAlgorithm.h
        src/collision/narrowphase/algorithm/CollisionAlgorithmBuilder.cpp
        src/collision/narrowphase/algorithm/CollisionAlgorithmBuilder.h
        src/collision/narrowphase/algorithm/CollisionAlgorithmSelector.cpp
        src/collision/narrowphase/algorithm/CollisionAlgorithmSelector.h
        src/collision/narrowphase/algorithm/CompoundAnyCollisionAlgorithm.cpp
        src/collision/narrowphase/algorithm/CompoundAnyCollisionAlgorithm.h
        src/collision/narrowphase/algorithm/ConvexConvexCollisionAlgorithm.cpp
        src/collision/narrowphase/algorithm/ConvexConvexCollisionAlgorithm.h
        src/collision/narrowphase/algorithm/SphereBoxCollisionAlgorithm.cpp
        src/collision/narrowphase/algorithm/SphereBoxCollisionAlgorithm.h
        src/collision/narrowphase/algorithm/SphereSphereCollisionAlgorithm.cpp
        src/collision/narrowphase/algorithm/SphereSphereCollisionAlgorithm.h
        src/collision/narrowphase/CollisionObjectWrapper.cpp
        src/collision/narrowphase/CollisionObjectWrapper.h
        src/collision/narrowphase/NarrowPhaseManager.cpp
        src/collision/narrowphase/NarrowPhaseManager.h
        src/collision/CollisionWorld.cpp
        src/collision/CollisionWorld.h
        src/collision/ManifoldContactPoint.cpp
        src/collision/ManifoldContactPoint.h
        src/collision/ManifoldResult.cpp
        src/collision/ManifoldResult.h
        src/collision/OverlappingPair.cpp
        src/collision/OverlappingPair.h
        src/object/CollisionBoxObject.cpp
        src/object/CollisionBoxObject.h
        src/object/CollisionCapsuleObject.cpp
        src/object/CollisionCapsuleObject.h
        src/object/CollisionConeObject.cpp
        src/object/CollisionConeObject.h
        src/object/CollisionConvexHullObject.cpp
        src/object/CollisionConvexHullObject.h
        src/object/CollisionConvexObject3D.cpp
        src/object/CollisionConvexObject3D.h
        src/object/CollisionCylinderObject.cpp
        src/object/CollisionCylinderObject.h
        src/object/CollisionSphereObject.cpp
        src/object/CollisionSphereObject.h
        src/object/TemporalObject.cpp
        src/object/TemporalObject.h
        src/processable/raytest/RayTester.cpp
        src/processable/raytest/RayTester.h
        src/processable/raytest/RayTestResult.cpp
        src/processable/raytest/RayTestResult.h
        src/processable/Processable.cpp
        src/processable/Processable.h
        src/shape/CollisionBoxShape.cpp
        src/shape/CollisionBoxShape.h
        src/shape/CollisionCapsuleShape.cpp
        src/shape/CollisionCapsuleShape.h
        src/shape/CollisionCompoundShape.cpp
        src/shape/CollisionCompoundShape.h
        src/shape/CollisionConeShape.cpp
        src/shape/CollisionConeShape.h
        src/shape/CollisionConvexHullShape.cpp
        src/shape/CollisionConvexHullShape.h
        src/shape/CollisionCylinderShape.cpp
        src/shape/CollisionCylinderShape.h
        src/shape/CollisionShape3D.cpp
        src/shape/CollisionShape3D.h
        src/shape/CollisionSphereShape.cpp
        src/shape/CollisionSphereShape.h
        src/shape/CollisionHeightfieldShape.cpp
        src/shape/CollisionHeightfieldShape.h
        src/utils/math/PhysicsTransform.cpp
        src/utils/math/PhysicsTransform.h
        src/utils/pool/FixedSizePool.cpp
        src/utils/pool/FixedSizePool.h
        src/visualizer/CollisionVisualizer.cpp
        src/visualizer/CollisionVisualizer.h
        src/PhysicsWorld.cpp
        src/PhysicsWorld.h
        src/UrchinPhysicsEngine.h
        src/collision/narrowphase/algorithm/ConcaveAnyCollisionAlgorithm.cpp
        src/collision/narrowphase/algorithm/ConcaveAnyCollisionAlgorithm.h
        src/shape/CollisionTriangleShape.cpp
        src/shape/CollisionTriangleShape.h
        src/object/CollisionTriangleObject.cpp
        src/object/CollisionTriangleObject.h
        src/shape/CollisionConcaveShape.cpp
        src/shape/CollisionConcaveShape.h
        src/collision/narrowphase/algorithm/utils/AlgorithmResultAllocator.cpp
        src/collision/narrowphase/algorithm/utils/AlgorithmResultAllocator.h
        src/collision/narrowphase/algorithm/utils/AlgorithmResult.cpp
        src/collision/narrowphase/algorithm/utils/AlgorithmResult.h
        src/collision/narrowphase/algorithm/utils/AlgorithmResultDeleter.cpp
        src/collision/narrowphase/algorithm/utils/AlgorithmResultDeleter.h
        src/utils/property/EagerPropertyLoader.cpp
        src/utils/property/EagerPropertyLoader.h
        src/character/PhysicsCharacter.cpp
        src/character/PhysicsCharacter.h
        src/character/PhysicsCharacterController.cpp
        src/character/PhysicsCharacterController.h
        src/collision/broadphase/SyncVectorPairContainer.cpp
        src/collision/broadphase/SyncVectorPairContainer.h
        src/object/pool/CollisionConvexObjectPool.cpp
        src/object/pool/CollisionConvexObjectPool.h
        src/object/pool/ObjectDeleter.cpp
        src/object/pool/ObjectDeleter.h
        src/utils/pool/SyncFixedSizePool.cpp
        src/utils/pool/SyncFixedSizePool.h)

include_directories(src ../common/src)

add_library(urchinPhysicsEngine SHARED ${SOURCE_FILES})
target_link_libraries(urchinPhysicsEngine pthread urchinCommon -static-libstdc++)
